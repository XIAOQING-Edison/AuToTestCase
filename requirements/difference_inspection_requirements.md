差异验收V1.3










文档修订记录



日期






文档版本






状态






修订内容简述






修订人






批准人






2024-12-18






1.3






A






创建文档






刘春妍
























































































*状态：A--新增，M--修改，D--删除；



文档评审记录



评审类型






评审人






角色






评审意见






评审状态






评审日期






备注






P






刘春妍






产品

































































评审状态：P--待评审、A--评审通过、R--驳回；



版本计划



434343版本号






版本规划






修订时间






撰写人






预计上线时间






v1.3






简化采购入库验收及发起差异流程，将两步功能合并为一步；

支持移动端发起差异验收；








2024-12-18






刘春妍














v1.4






物料仓支持差异验收；
























































1.版本概述




1.1 版本背景




当前系统正常仓门店在收货流程中需完成签收、验收、发起差异三步独立操作。这与实际门店作业流程不符，实际作业场景为：物流将货物送达门店后，店员首先通过扫码枪扫描包裹号完成签收，随后物流人员协助将货物放至仓库。店员通常在空闲时间拆包验货并将货物放置到指定货架区域。在验收环节，如发现破损或异常需进行记录，并直接发起差异。
现有系统将签收、验收、发起差异分为三步操作，流程冗长，导致门店收货效率受到影响。






1.2  版本目标




简化门店签收、验收及发起差异流程，将验收与差异发起功能合并为一步操作，同时支持通过移动APP端发起差异，提升操作便捷性，优化用户体验，从而提高门店整体收货效率。






2.功能概述




2.1 流程说明





























2.2功能清单




应用端






一级功能






二级功能






需求描述






备注






管理后台






采购入库






验收






验收入库，支持修改实收数量或实收PCS数，并支持录入差异类型和差异凭证














验收入库确认






入库仍按采购入库单应收数量、应收PCS数入库。如有差异，在验收确认时系统自动生成差异验收单














发起差异






去掉【发起差异】入口，与验收入库同步为一步操作














差异验收






差异验收详情






详情页信息优化，展示差异数量、差异PCS数、单商品维度差异证据
















移动端










采购入库






验收






验收入库，支持修改实收数量或实收PCS数，并支持录入差异类型和差异凭证














验收入库确认






入库仍按采购入库单应收数量、应收PCS数入库。如有差异，在验收确认时系统自动生成差异验收单














提交差异






支持在完成验收入库生成差异验收单后，录入差异明细数据并发起差异


















差异验收






差异验收列表






差异验收单列表，支持从采购入库单、单独入口访问














筛选






支持根据发起/接收门店、来源单号、发起时间等筛选差异验收单














详情






差异验收单详情页，包含基本信息、差异明细（仅展示有差异的商品）、其他信息
















提交审核






待提交状态差异验收单支持提交审核














审核






审核差异验收单据














撤销






待审核的单据支持撤销审核后编辑














作废






待提交、待审核状态单据支持作废








































































3.需求说明




一级功能






二级功能






产品原型






需求说明






备注






管理后台-采购入库






验收




























已删版：













验收由确认对话框改为跳转至【采购入库验收】界面；

验收明细列表：
【实收数量】：不可编辑；

【实收PCS数】：
改为可编辑，必填，默认等于应收PCS数；

单品：修改实收PCS数，自动计算更新实收数量；实收数量=实时PCS数；

中包：修改实收PCS数，自动计算更新实收数量；实收数量=ROUNDUP（实收PCS数/中包箱规）；

Hint文案：系统将根据实收PCS数自动发起差异。实收数量 = ROUNDUP(实收PCS数 / 中包箱规)
英文：The system will automatically generate discrepancies based on the received PCS count. Received quantity = ROUNDUP(received PCS count / carton size).

泰语：ระบบจะสร้างความแตกต่างโดยอัตโนมัติจากจำนวน PCS ที่รับจริง จำนวนที่รับ = ROUNDUP(จำนวน PCS ที่รับจริง / ขนาดกล่อง)

越南语：Hệ thống sẽ tự động tạo ra sự chênh lệch dựa trên số lượng PCS đã nhận. Số lượng nhận = ROUNDUP(số lượng PCS đã nhận / kích thước thùng carton)





差异凭证：非必填，支持上传图片类型文件；最多6张

差异类型：非必填，支持选择商品差异类型；


















验收确认




























验收确认：点击【验收确认】，二次对话框确认；

验收入库：仍按应收数量、应收PCS数入库；

自动生成差异验收单：如验收时有填写差异数量，则系统自动生成差异验收单，并在确认验收后，对话框确认是否立即提交审核；

差异提示：仅验收时有差异的单据提示，点击【确认】跳转至发起差异页面；
















管理后台-差异验收






发起差异


































由采购入库单自动生成的差异验收单，自动带出已录入内容，允许编辑实收数量、实收PCS、差异凭证、差异类型、整单差异类型、备注等字段；

发起差异：根据采购入库单号自动带出采购入库单信息，允许编辑实收数量、实收PCS、差异凭证、差异类型、整单差异类型、备注、差异证据等字段；
实收PCS数：必填，数字输入框，默认等于应收PCS数，支持录入非负整数，范围0-99999；

单品：修改实收PCS数，自动计算更新实收数量；实收数量=实时PCS数；

中包：修改实收PCS数，自动计算更新实收数量；实收数量=ROUNDUP（实收PCS数/中包箱规）；

Hint文案：系统将根据实收PCS数自动发起差异。实收数量 = ROUNDUP(实收PCS数 / 中包箱规)
英文：The system will automatically generate discrepancies based on the received PCS count. Received quantity = ROUNDUP(received PCS count / carton size).

泰语：ระบบจะสร้างความแตกต่างโดยอัตโนมัติจากจำนวน PCS ที่รับจริง จำนวนที่รับ = ROUNDUP(จำนวน PCS ที่รับจริง / ขนาดกล่อง)

越南语：Hệ thống sẽ tự động tạo ra sự chênh lệch dựa trên số lượng PCS đã nhận. Số lượng nhận = ROUNDUP(số lượng PCS đã nhận / kích thước thùng carton)



差异维度：
普通商品：默认文本展示"单品差异"；

中包商品：下拉框禁选，默认选中"单品差异"，后续做配置中心时若开启中包差异时，允许选择中包差异；




















差异验收列表




















新增【发起差异】入口；此入口作为兜底机制，如在验收时业务忘记录入差异数，后续需要录入时，可在此次发起，填写入库单号后自动带出商品、门店等信息；
















差异详情




















差异列表新增差异数量、差异PCS数、差异凭证；
















移动端-采购入库






验收




































验收由确认对话框改为跳转至【采购入库验收】界面；

验收明细列表：
【实收数量】：不可编辑；

【实收PCS数】：
改为可编辑，必填，默认等于应收PCS数；

单品：修改实收PCS数，自动计算更新实收数量；实收数量=实时PCS数；

中包：修改实收PCS数，自动计算更新实收数量；实收数量=ROUNDUP（实收PCS数/中包箱规）；



差异凭证：非必填，支持上传图片类型文件；最多6张

差异类型：非必填，支持选择商品差异类型；




















验收确认




























验收确认：点击【验收确认】，二次对话框确认；

验收入库：仍按应收数量、应收PCS数入库；

自动生成差异验收单：如验收时有填写差异数量，则系统自动生成差异验收单，并在确认验收后，对话框确认是否立即提交审核；

差异提示：仅验收时有差异的单据提示，点击【确认】跳转至发起差异页面；
















差异验收






入口





























差异验收单入口：
采购入库单：
列表：列表首页支持快捷跳转至差异验收单列表页面；

入库单详情：有生成差异验收单记录的已签收验收单据，详情页展示【差异明细】按钮，支持快捷跳转至该采购入库单的差异详情页；



首页：
角标展示登录人账号权限内待审核差异单据数量；

进入差异验收单列表，展示权限范围内筛选的差异验收单数据；




















差异验收列表






















排序：按创建时间倒序；

列表字段：发起门店名称、来源单号、差异验收单号、创建时间、整单差异类型、差异SKU数、差异PCS数；

发起差异：点击后跳转至发起差异页面，支持录入采购入库单号后填写并发起差异；

筛选：详见下方筛选说明；

扫码：支持快捷扫描入库单号搜索；

状态与操作项：
待提交：提交审核、作废；

待审核：审核、撤销差异、作废；

已审核：无；

判责中：无；

已终审：无；

已作废：无；


















筛选




















创建时间：日期时间段控件，默认选中近一个月时间，最多支持查询时间跨度3个月；

来源单号：精确搜索，根据采购入库单TPA4搜索；

发起门店：门店选择器，默认全部，支持查询当前登录人数据权限范围内的门店；

接收门店：门店选择器，默认全部，支持查询当前登录人数据权限范围内的门店；

差异验收单号：精确搜索，根据差异单号搜索；

整单差异类型：默认全部，下拉单选。
















发起差异






























规则同管理后台发起差异页面；
整单差异类型：下拉选择框，单选必填；

备注：必填，差异证据描述，文本，最多50字；

证据上传：必填，图片或视频，文件上限10个，单视频最大50M，单图不超过5M（前端压缩）；



差异明细列表：
实收数量：不可编辑；

实收PCS数：可编辑，默认=应收PCS数，非0整数；实收数量、实收PCS数仅可编辑其中一项；

支持按单商品维度录入差异类型、差异凭证，差异类型、差异凭证均非必填；
差异类型：非必填，下拉单选，枚举值同后台；

差异凭证：非必填，支持上传图片，最多3张图片；





操作项：
提交审核：保存并提交审核，操作后单据状态为【待审核】；

保存：保存差异单数据，操作后单据状态为【待提交】；


















详情




























差异验收单详情，如原型所示，包含【基本信息】【差异明细】【其他信息】三部分内容；

基本信息：
差异验收单号：创建单据时系统自动生成；

来源单号：来源的采购入库单号，取TPA4单号；

发起门店：发起差异验收的门店；

接收门店：仅门店调拨差异验收单显示该字段，其他类型单据不展示；

整单差异类型：展示发起单据录入的整单差异类型；

提交备注：提交差异单时录入的备注；

终审备注：差异单终审时录入的备注；

差异证据：支持下载预览；



差异明细：
字段：物料编码、物料名称、物料条码、批号、应收数量、应收PCS数、实收数量、实收PCS数、差异数量、差异PCS数、差异类型、差异凭证、

排序：按采购入库单中商品顺序排序；

数据：仅展示有差异的商品明细，采购入库单中无差异的商品不展示；

操作项：详见状态机操作项说明；


















提交审核




















同管理后台提交审核功能














审核






























审核通过：审核通过后续单据流程，同管理后台审核功能;

驳回：需录入驳回原因，驳回后支持编辑后再次提交审核或作废；
















撤销差异




















撤销审核：待审核状态支持撤销差异，撤销后单据状态变更为【待提交】；
















作废




















待提交、待审核状态单据，支持作废，作废后将不允许再次发起差异；









































































附录




原型地址：



http://kpos-prototype.kkguan.com/kpos%E9%A1%B9%E7%9B%AE%E6%B1%87%E6%80%BB/kpos%E9%A1%B9%E7%9B%AE%E6%B1%87%E6%80%BB/%E5%B7%AE%E5%BC%82%E9%AA%8C%E6%94%B6v1.3/



账号：admin    密码：3A5tj3PyAymXdS1u








会议纪要




1、差异验收单自动审核：



    a、是否真需要在POS自动审核？POS和TERP中的审核内容不同，需找业务再确定下？



    b、自动审核在SaaS产品上的合理性；



    c、SaaS化审核接入天书审批流，天书审批流怎样知道KPOS单据详情？----答疑：接入天书的消息通知，点击审批进入到KPOS的单据详情页面；



结论：跟业务对齐后，保持现状，暂无需改为自动审核，后续业务规范流程后再简化，或可借助麦吉AI处理审批。



2、TERP终审后驳回二次发起：



    a、TERP终审驳回，已产生的单据很难支持二次修改后再发起，需再找业务和TERP确认下是否有必要；驳回后如真有需要，是否再次发起更合理；



    b、在时间允许限制内，可以再次发起，再次发起自动录入上一次差异内容，允许编辑补充；TERP驳回的单据，驳回原因展示在原差异单详情页；



结论：驳回后因涉及到TERP单据相关流程，不建议编辑后再次发起。但已驳回的采购入库单可以允许门店二次发起差异。



3、撤销差异：已经同步至TERP的单据，撤销差异影响到的单据很多，能否支持撤销，需再找TERP对齐后与业务共识；



结论：已经同步至TERP的单据不允许撤销，允许审核驳回。未审核的单据允许撤销差异，撤销后支持编辑后再次发起审核。



4、中包商品验收：前端交互问题-改了实收单PCS数，实收数量非整数时怎样展示？



结论：只允许修改PCS数，中包和单品都只允许业务修改PCS数，减少业务操作理解成本。



5、移动端待处理角标：补充工作台待处理数量角标统计规则；主界面角标数量与列表默认筛选范围的统计数量会出现不一致的情况，补充下需求描述；



结论：工作台角标统计待审核、待提交非终态数据条数；列表角标统计筛选的条件范围内数据条数；







